# Как был написан эзотерический полиглот

**Шаги**:

1. *Идея*
2. *Malbolge*
3. *Brainfuck*
4. *Spoon*
5. *123*
6. *asdf*
7. *EXCON*
8. *Whitespace*
9. *Окончание*

## Идея
Полиглот в программировании - это корректная программа, написанная одновременно на нескольких языках программирования. Как правило, вывод такой программы не зависит от того, интерпретатор какого конкретно языка ее исполняет. В крайнем случае вывод строится по некоему шаблону.

Наш полиглот будет выводить в консоль **%название_языка% program**. Он отличается от большинства представителей семейства полиглотов - в его исходнике нет ни одного нормального языка. Только эзотерика, только хардкор! :)

Есть легкий способ сделать код корректным сразу на нескольких языках: их лексемы должны не пересекаться или совпадать по минимуму. Например, исходник на **123** состоит только из **1**,**2** и **3**, а исходник на **asdf** состоит из (внезапно) **a**,**s**,**d** и **f**.

Главная проблема при таком подходе - Malbolge. Его исходник может содержать любые [печатные символы](https://en.wikipedia.org/wiki/ASCII#Printable_characters) от **!** до **~**. Так что любая инструкция на любом другом языке должна быть корректной инструкцией для Malbolge. Он задает такт музыке, с него и начнем.

## Malbolge
Зачем писать исходник самому, когда можно переложить эту работу на компьютер? :) Что я и сделал, написав генератор исходников для Malbolge на языке системы Mathematica (сорян, ребят, я развлекался как мог).

Чтобы понять, как он работает, следует знать принцип работы интерпретатора Malbolge. Лучше всего для этого прочитать [оригинальную спецификацию](http://www.lscheffer.com/malbolge_spec.html) и [исходник оригинального интерпретатора](http://www.lscheffer.com/malbolge_interp.html). 
В языке есть всего 8 инструкций (**j**,**i**,__\*__,**p**,**<**,**/**,**v**,**o**), так что те исходники, которые вы видите в Интернете (в Википедии и пр.) - всего лишь их "зашифрованная" последовательность. Незашифрованная версия называется *нормализованный исходный код*, это название придумал [Эндрю Кук](http://www.acooke.org/malbolge.html), написавший первый *Hello world* (на самом деле он его тоже сгенерировал). Есть очень простое правило: код на Malbolge корректен, если его нормализованное представление состоит только из вышеуказанных 8 инструкций, да еще, быть может, пробельных символов, которые будут проигнорированы интерпретатором.

Виртуальная машина языка использует 3 регистра: **A** (акуумулятор), **C** (указатель на код) и **D** (указатель на данные).  Изначально все регистры установлены в *0*. То, что **C** и **D** указывают на одну и ту же инструкцию, крайне затрудняет формирование кода ASCII-символа для его вывода. Возможное решение заключается в разделении кода на 2 части: секция *кода* и секция *данных*.
